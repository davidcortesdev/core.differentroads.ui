// Variables
$skeleton-gap: 1rem;
$profile-gap: 1.4rem;
$mobile-breakpoint: 768px;
$tablet-breakpoint: 992px;
$skeleton-bg: rgba(255, 255, 255, 0.1);
$skeleton-shine: rgba(255, 255, 255, 0.2);
$z-index-menu: 9999;
$z-index-overlay: 9998;

// Mixins
@mixin flex-center {
    display: flex;
    align-items: center;
}

@mixin reset-menubar {
    border: none;
    border-radius: 0;
    border-top: 0px solid var(--background-azul);
}

@mixin responsive-menu {
    .p-menubar-button {
        display: block !important;
    }

    .p-menubar-root-list {
        display: none;

        &.p-menubar-mobile-active {
            display: flex;
        }
    }
}

// Base styles
.header-wrapper {
    width: 100%;
}

.menu-skeleton {
    @include flex-center;
    gap: $skeleton-gap;
}

.user-skeleton {
    border-radius: 16px;
}

.busqPerfil {
    @include flex-center;
    gap: $profile-gap;
}

.logo {
    padding: 0.7rem 0 0.7rem 1.25rem;
}

.top-menu {
    height: 4rem;
}

// Deep styles for PrimeNG components
:host ::ng-deep {
    // Skeleton animation
    .p-skeleton {
        background-color: $skeleton-bg;

        &::after {
            background: linear-gradient(90deg, $skeleton-bg, $skeleton-shine, $skeleton-bg);
        }
    }

    // Chip styling
    .p-chip {
        box-shadow: 0 0 0 0.5px var(--background-azul);
        background: transparent;
        font-size: 14px;
    }

    // Top menu styling
    .top-menu.p-menubar {
        @include reset-menubar;
        position: relative;
        z-index: $z-index-menu;
        box-shadow: 0 -2px 10px -3px var(--background-azul);
    }

    // Navigation menu styling
    .nav-menu.p-menubar {
        @include reset-menubar;
        box-shadow: 0 2px 6px -1px var(--background-azul);
        position: relative;

        // Hide hamburger by default
        .p-menubar-button {
            display: none;
        }
    }

    // Desktop nested menu styles
    .nav-menu .p-menubar {
        background: transparent;
        border: none;
        padding: 0;
        position: relative;

        .p-menubar-root-list .p-menuitem {
            margin: 0;
        }

        // Always hide nested menubar buttons on desktop
        .p-menubar-button {
            display: none !important;
        }
    }

    // Z-index management for menus
    .p-menu.p-component,
    .p-menubar-submenu,
    .p-menubar .p-menubar-root-list > .p-menuitem > .p-submenu-list,
    .p-submenu-list,
    .left-menu .p-submenu-list,
    .right-menu .p-submenu-list {
        z-index: $z-index-menu !important;
    }

    .user-popup-menu {
        z-index: $z-index-menu + 1 !important;
    }

    .p-component-overlay {
        z-index: $z-index-overlay !important;
    }

    // Responsive styles
    @media screen and (max-width: #{$tablet-breakpoint}) {
        // Hide chip label
        .user-chip .p-chip-label {
            display: none;
        }

        // Show hamburger menu
        .p-menubar-button {
            display: block !important;
        }

        // Mobile menu expanded state
        .p-menubar.p-menubar-mobile-active .p-menubar-root-list {
            display: flex;
            flex-direction: column;
            width: 100%;
            position: absolute;
            top: 100%;
            left: 0;
            z-index: $z-index-menu;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);

            // Full width items
            .p-menuitem {
                width: 100%;

                .p-menuitem-link {
                    width: 100%;
                    padding: 1rem;
                    justify-content: flex-start;
                }
            }

            // Submenu styling
            .p-menuitem-active > .p-submenu-list {
                position: relative;
                width: 100%;
                box-shadow: none;
                border: none;
                margin-left: 1rem;
            }
        }

        // Bottom section menu
        .bottom-section .nav-menu.p-menubar {
            .p-menubar-button {
                display: block !important;
            }

            .p-menubar-root-list {
                display: none;
            }

            &.p-menubar-mobile-active .p-menubar-root-list {
                display: flex;
            }
        }

        // Show hamburger in nav menu
        .nav-menu.p-menubar .p-menubar-button {
            display: block;
            margin-left: 10px;
            margin-bottom: -10px;
        }
    }
}

// Tablet-specific adjustments
@media screen and (min-width: #{$mobile-breakpoint + 1px}) and (max-width: #{$tablet-breakpoint}) {
    :host ::ng-deep {
        .nav-menu.p-menubar .p-menubar-root-list .p-menuitem .p-menuitem-link {
            padding: 0.75rem 1rem;
        }
    }
}
