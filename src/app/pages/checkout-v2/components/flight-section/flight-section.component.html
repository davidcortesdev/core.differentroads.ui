<div class="flight-section" *ngIf="shouldShowComponent">
  <div class="flight-section-header">
    <div class="header-icon">
      <i class="fas fa-plane"></i>
    </div>
    <h4>
      Vuelos seleccionados
      <i class="fa-light fa-chevron-down"></i>
    </h4>
  </div>
  
  <div class="flight-details">
    <!-- Vuelo de ida -->
    <div class="flight-journey" *ngIf="departureFlight">
        <!-- Separador entre vuelos -->
    <div class="flight-separator" *ngIf="departureFlight && returnFlight">
        <div class="separator-line"></div>
        <div class="separator-text">Ida</div>
        <div class="separator-line"></div>
      </div>
      
      <div class="journey-info">
        <div class="departure">
          <div class="time">{{ formatTime(departureFlight.departureTime) }}</div>
          <div class="date">{{ formatDate(departureFlight.departureDate) }}</div>
          <div class="city">
            <div class="city-name">{{ getDepartureCityName(departureFlight) }}</div>
            <div class="airport-code">{{ departureFlight.departureIATACode }}</div>
          </div>
        </div>
        
        <div class="journey-line">
          <div class="line-container">
            <div class="line"></div>
            <span class="layovers-text" *ngIf="departureFlightLayovers && departureFlightLayovers.length > 0" (mouseenter)="opDeparture.show($event)" (mouseleave)="opDeparture.hide()">
              {{ getLayoversText(departureFlightLayovers) }}
            </span>
            <p-popover #opDeparture [showDelay]="300" [hideDelay]="100">
              <div class="flight-details-content">
                <div class="popover-header">
                  <h4>Detalle del vuelo</h4>
                </div>
                <ul *ngIf="departureCitiesLoaded" class="flight-segments-list">
                  <li *ngFor="let seg of getDepartureFlightSegments()" class="flight-segment-item">
                    <div class="segment-info">
                      <div class="segment-route">
                        <div class="departure-info">
                          <div class="time-city-row">
                            <span class="time">{{ formatTime(seg.departureTime) }}</span>
                            <span class="city-name">{{ seg.departureCity }}</span>
                          </div>
                          <span class="airport-code">({{ seg.departureIata }})</span>
                        </div>
                        <span class="route-arrow">→</span>
                        <div class="arrival-info">
                          <div class="time-city-row">
                            <span class="time">{{ formatTime(seg.arrivalTime) }}</span>
                            <span class="city-name">{{ seg.arrivalCity }}</span>
                          </div>
                          <span class="airport-code">({{ seg.arrivalIata }})</span>
                        </div>
                      </div>
                      <div class="flight-number" *ngIf="seg.flightNumber">
                        Vuelo: {{ seg.flightNumber }}
                      </div>
                    </div>
                  </li>
                </ul>
                <div *ngIf="!departureCitiesLoaded" class="loading-cities">
                  <i class="pi pi-spin pi-spinner"></i>
                  <span>Cargando nombres de ciudades...</span>
                </div>
              </div>
            </p-popover>
          </div>
          <div class="plane-icon">
            <i class="fas fa-plane"></i>
          </div>
        </div>
        
        <div class="arrival">
          <div class="time">{{ formatTime(departureFlight.arrivalTime) }}</div>
          <div class="date">{{ formatDate(departureFlight.arrivalDate) }}</div>
          <div class="city">
            <div class="city-name">{{ getArrivalCityName(departureFlight) }}</div>
            <div class="airport-code">{{ departureFlight.arrivalIATACode }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Separador entre vuelos -->
    <div class="flight-separator" *ngIf="departureFlight && returnFlight">
      <div class="separator-line"></div>
      <div class="separator-text">Vuelta</div>
      <div class="separator-line"></div>
    </div>

    <!-- Vuelo de vuelta -->
    <div class="flight-journey" *ngIf="returnFlight">
      
      <div class="journey-info">
        <div class="departure">
          <div class="time">{{ formatTime(returnFlight.departureTime) }}</div>
          <div class="date">{{ formatDate(returnFlight.departureDate) }}</div>
          <div class="city">
            <div class="city-name">{{ getDepartureCityName(returnFlight) }}</div>
            <div class="airport-code">{{ returnFlight.departureIATACode }}</div>
          </div>
        </div>
        
        <div class="journey-line">
          <div class="line-container">
            <div class="line"></div>
            <span class="layovers-text" *ngIf="returnFlightLayovers && returnFlightLayovers.length > 0" (mouseenter)="opReturn.show($event)" (mouseleave)="opReturn.hide()">
              {{ getLayoversText(returnFlightLayovers) }}
            </span>
            <p-popover #opReturn [showDelay]="300" [hideDelay]="100">
              <div class="flight-details-content">
                <div class="popover-header">
                  <h4>Detalle del vuelo</h4>
                </div>
                <ul *ngIf="returnCitiesLoaded" class="flight-segments-list">
                  <li *ngFor="let seg of getReturnFlightSegments()" class="flight-segment-item">
                    <div class="segment-info">
                      <div class="segment-route">
                        <div class="departure-info">
                          <div class="time-city-row">
                            <span class="time">{{ formatTime(seg.departureTime) }}</span>
                            <span class="city-name">{{ seg.departureCity }}</span>
                          </div>
                          <span class="airport-code">({{ seg.departureIata }})</span>
                        </div>
                        <span class="route-arrow">→</span>
                        <div class="arrival-info">
                          <div class="time-city-row">
                            <span class="time">{{ formatTime(seg.arrivalTime) }}</span>
                            <span class="city-name">{{ seg.arrivalCity }}</span>
                          </div>
                          <span class="airport-code">({{ seg.arrivalIata }})</span>
                        </div>
                      </div>
                      <div class="flight-number" *ngIf="seg.flightNumber">
                        Vuelo: {{ seg.flightNumber }}
                      </div>
                    </div>
                  </li>
                </ul>
                <div *ngIf="!returnCitiesLoaded" class="loading-cities">
                  <i class="pi pi-spin pi-spinner"></i>
                  <span>Cargando nombres de ciudades...</span>
                </div>
              </div>
            </p-popover>
          </div>
          <div class="plane-icon">
            <i class="fas fa-plane"></i>
          </div>
        </div>
        
        <div class="arrival">
          <div class="time">{{ formatTime(returnFlight.arrivalTime) }}</div>
          <div class="date">{{ formatDate(returnFlight.arrivalDate) }}</div>
          <div class="city">
            <div class="city-name">{{ getArrivalCityName(returnFlight) }}</div>
            <div class="airport-code">{{ returnFlight.arrivalIATACode }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 