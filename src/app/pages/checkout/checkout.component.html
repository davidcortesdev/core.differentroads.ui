<div class="checkout">
  <div class="checkout-container">
    <!-- Left and Center columns with steps -->
    <div class="steps-container">
      <p-stepper [value]="currentStep">
        <p-step-list>
          <p-step [value]="1">Personaliza tu viaje</p-step>
          <p-step [value]="2">Vuelos</p-step>
          <p-step [value]="3">Viajeros</p-step>
          <p-step [value]="4">Pago</p-step>
        </p-step-list>

        <p-step-panels>
          <p-step-panel [value]="1">
            <ng-template #content let-activateCallback="activateCallback">
              <app-customize-trip
                *ngIf="orderDetails && prices"
                [orderDetails]="orderDetails"
                [prices]="prices"
              ></app-customize-trip>
              <div class="flex pt-6 justify-end">
                <p-button
                  label="Next"
                  icon="pi pi-arrow-right"
                  iconPos="right"
                  (onClick)="activateCallback(2)"
                />
              </div>
            </ng-template>
          </p-step-panel>
          <p-step-panel [value]="2">
            <ng-template #content let-activateCallback="activateCallback">
              <app-flights
                *ngIf="orderDetails && prices"
                [orderDetails]="orderDetails"
              ></app-flights>
              <div class="flex pt-6 justify-between">
                <p-button
                  label="Back"
                  severity="secondary"
                  icon="pi pi-arrow-left"
                  (onClick)="activateCallback(1)"
                />
                <p-button
                  label="Next"
                  icon="pi pi-arrow-right"
                  iconPos="right"
                  (onClick)="activateCallback(3)"
                />
              </div>
            </ng-template>
          </p-step-panel>
          <p-step-panel [value]="3">
            <ng-template #content let-activateCallback="activateCallback">
              <app-travelers></app-travelers>
              <div class="flex pt-6 justify-between">
                <p-button
                  label="Back"
                  severity="secondary"
                  icon="pi pi-arrow-left"
                  (onClick)="activateCallback(2)"
                />
                <p-button
                  label="Next"
                  icon="pi pi-arrow-right"
                  iconPos="right"
                  (onClick)="activateCallback(4)"
                />
              </div>
            </ng-template>
          </p-step-panel>
          <p-step-panel [value]="4">
            <ng-template #content let-activateCallback="activateCallback">
              <app-payment [totalPrice]="total"></app-payment>
              <div class="flex pt-6 justify-between">
                <p-button
                  label="Back"
                  severity="secondary"
                  icon="pi pi-arrow-left"
                  (onClick)="activateCallback(3)"
                />
              </div>
            </ng-template>
          </p-step-panel>
        </p-step-panels>
      </p-stepper>
    </div>

    <!-- Right column - Order Summary -->
    <div class="order-summary">
      <h3>Resumen del pedido</h3>
      <div class="summary-content">
        <!-- Tour base info -->
        <div class="tour-base-info">
          <!--   <h4>{{ tourName }}</h4>
          <p>{{ tourDates }}</p> -->

          <!-- Selected items list -->
          <div class="selected-items">
            <div *ngFor="let item of summary" class="item">
              <span>{{ item.description }}</span>

              <span
                >{{ item.qty }} x {{ item.price | currencyFormat : "EUR" }} =
                {{ item.price * item.qty | currencyFormat : "EUR" }}</span
              >
            </div>
          </div>

          <!-- Flights info if selected -->
          <div class="flights-info" *ngIf="selectedFlight">
            <h4>Vuelos</h4>
            <div class="flight-details">
              <!-- Flight details here -->
            </div>
          </div>

          <!-- Total section -->
          <div class="total-section">
            <div class="subtotal">
              <span>Subtotal</span>
              <span>{{ subtotal | currencyFormat : "EUR" }}</span>
            </div>
            <div class="total">
              <span>Total</span>
              <span>{{ total | currencyFormat : "EUR" }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
