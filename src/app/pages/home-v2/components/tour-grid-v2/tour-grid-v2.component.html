<div class="tour-grid-container" #tourGridContainer>
  <!-- SecciÃ³n de filtros (opcional) -->
  <div *ngIf="showFilters" class="tours-filters">
    <p-floatlabel class="w-full md:w-56 min-width" variant="on">
      <p-select
        id="order_label"
        [options]="orderOptions"
        [(ngModel)]="selectedOrderOption"
        (ngModelChange)="onOrderChange()"
        optionLabel="name"
        optionValue="value"
        placeholder="Ordenar por"
        class="w-full md:w-56"
      />
      <label for="order_label">Ordenar por</label>
    </p-floatlabel>

    <span class="space"></span>

    <p-floatlabel class="w-full md:w-56 min-width" variant="on">
      <p-multiselect
        id="season_label"
        class="filter-box"
        [options]="seasonOptions"
        [(ngModel)]="selectedSeasonOption"
        (ngModelChange)="onSeasonFilterChange()"
        optionLabel="name"
        optionValue="value"
        filter="false"
        [maxSelectedLabels]="1"
        [displaySelectedLabel]="true"
        selectedItemsLabel="{0} items"
        [showToggleAll]="false"
      />
      <label for="season_label">Temporada</label>
    </p-floatlabel>

    <p-floatlabel class="w-full md:w-56 min-width" variant="on">
      <p-multiselect
        id="month_label"
        [options]="monthOptions"
        [(ngModel)]="selectedMonthOption"
        (ngModelChange)="onMonthFilterChange()"
        optionLabel="name"
        optionValue="value"
        filter="false"
        [maxSelectedLabels]="1"
        [displaySelectedLabel]="true"
        selectedItemsLabel="{0} items"
        [showToggleAll]="false"
      />
      <label for="month_label">Mes</label>
    </p-floatlabel>

    <p-floatlabel class="w-full md:w-56 min-width" variant="on">
      <p-multiselect
        id="price_label"
        [options]="priceOptions"
        [(ngModel)]="selectedPriceOption"
        (ngModelChange)="onPriceFilterChange()"
        optionLabel="name"
        optionValue="value"
        filter="false"
        [maxSelectedLabels]="1"
        [displaySelectedLabel]="true"
        selectedItemsLabel="{0} items"
        [showToggleAll]="false"
      />
      <label for="price_label">Precio</label>
    </p-floatlabel>
  </div>

  <!-- Grid de tours -->
  <div class="tours-list">
    <!-- Indicador de carga -->
    <div *ngIf="isLoading && tours.length === 0" class="loading-container">
      <p-progressSpinner></p-progressSpinner>
    </div>

    <!-- Grid de tours -->
    <div *ngIf="!isLoading || tours.length > 0" class="grid">
      <div
        *ngFor="let tour of tours; let i = index"
        class="tour-card-wrapper"
      >
        <app-tour-card-v2 
          [tourData]="tour" 
          [itemListId]="itemListId"
          [itemListName]="itemListName"
          [index]="i"
        ></app-tour-card-v2>
      </div>
    </div>

    <!-- Mensaje cuando no hay tours -->
    <div *ngIf="!isLoading && tours.length === 0" class="no-tours-message">
      <p>No se encontraron tours para mostrar.</p>
    </div>
  </div>
</div>
