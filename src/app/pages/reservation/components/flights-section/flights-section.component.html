<div class="flights-container">
  <!-- Encabezado con icono de avión -->
  <div class="flight-header">
    <span class="plane-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
        fill="#f05a4c"
      >
        <path
          d="m397-115-99-184-184-99 71-70 145 25 102-102-317-135 84-86 385 68 124-124q23-23 57-23t57 23q23 23 23 56.5T822-709L697-584l68 384-85 85-136-317-102 102 26 144-71 71Z"
        />
      </svg>
    </span>
    <span class="header-text">Información sobre los vuelos</span>
  </div>

  <ng-container *ngIf="formattedFlights; else noFlights">
    <!-- Ida -->
    <ng-container *ngIf="formattedFlights.outbound">
      <div class="flight-section">
        <!-- Título Ida como subtítulo -->
        <div class="section-title">
          <span>Ida</span>
        </div>

        <!-- Contenido del vuelo de ida - Nueva estructura -->
        <div class="flight-route">
          <!-- Columna izquierda (Origen) -->
          <div class="flight-column origin">
            <div class="time-date">
              {{ formattedFlights.outbound.departureTime }}
              <span>{{ formattedFlights.outbound.date }}</span>
            </div>
            <div class="airport">
              {{ formattedFlights.outbound.departureAirport }}
            </div>
          </div>

          <!-- Línea central con duración -->
          <div class="flight-duration-container">
            <div class="duration">
              {{ formattedFlights.outbound.duration }}
            </div>
            <div class="flight-line">
              <div class="dot left"></div>
              <div class="line"></div>
              <div class="dot right"></div>
            </div>
            <div class="flight-type">
              <ng-container *ngIf="formattedFlights.outbound.hasStops">
                {{ formattedFlights.outbound.stops }}
                <ng-container *ngIf="formattedFlights.outbound.stops === 1"
                  >ESCALA</ng-container
                >
                <ng-container *ngIf="formattedFlights.outbound.stops > 1"
                  >ESCALAS</ng-container
                >
                {{ formattedFlights.outbound.stopCity }}
              </ng-container>
              <ng-container *ngIf="!formattedFlights.outbound.hasStops">
                DIRECTO
              </ng-container>
            </div>
          </div>

          <!-- Columna derecha (Destino) -->
          <div class="flight-column destination">
            <div class="time-date">
              {{ formattedFlights.outbound.arrivalTime }}
              <span>{{ formattedFlights.outbound.date }}</span>
            </div>
            <div class="airport">
              {{ formattedFlights.outbound.arrivalAirport }}
            </div>
          </div>
        </div>

        <!-- Detalle de escalas para vuelo de ida -->
        <ng-container *ngIf="formattedFlights.outbound.hasStops">
          <div class="flight-details">
            <div
              class="flight-segment"
              *ngFor="let segment of formattedFlights.outbound.segments"
            >
              {{ segment.airline.name }} ({{ segment.flightNumber }})
              {{ segment.departureTime }} {{ segment.departureCity }} ({{
                segment.departureIata
              }}) - {{ segment.arrivalTime }} {{ segment.arrivalCity }} ({{
                segment.arrivalIata
              }})
            </div>
          </div>
        </ng-container>
      </div>
    </ng-container>

    <!-- Vuelta -->
    <ng-container *ngIf="formattedFlights.inbound">
      <div class="flight-section">
        <!-- Título Vuelta como subtítulo -->
        <div class="section-title">
          <span>Vuelta</span>
        </div>

        <!-- Contenido del vuelo de vuelta - Nueva estructura -->
        <div class="flight-route">
          <!-- Columna izquierda (Origen) -->
          <div class="flight-column origin">
            <div class="time-date">
              {{ formattedFlights.inbound.departureTime }}
              <span>{{ formattedFlights.inbound.date }}</span>
            </div>
            <div class="airport">
              {{ formattedFlights.inbound.departureAirport }}
            </div>
          </div>

          <!-- Línea central con duración -->
          <div class="flight-duration-container">
            <div class="duration">
              {{ formattedFlights.inbound.duration }}
            </div>
            <div class="flight-line">
              <div class="dot left"></div>
              <div class="line"></div>
              <div class="dot right"></div>
            </div>
            <div class="flight-type">
              <ng-container *ngIf="formattedFlights.inbound.hasStops">
                {{ formattedFlights.inbound.stops }} ESCALA
                {{ formattedFlights.inbound.stopCity }}
              </ng-container>
              <ng-container *ngIf="!formattedFlights.inbound.hasStops">
                DIRECTO
              </ng-container>
            </div>
          </div>

          <!-- Columna derecha (Destino) -->
          <div class="flight-column destination">
            <div class="time-date">
              {{ formattedFlights.inbound.arrivalTime }}
              <span>{{ formattedFlights.inbound.date }}</span>
            </div>
            <div class="airport">
              {{ formattedFlights.inbound.arrivalAirport }}
            </div>
          </div>
        </div>

        <!-- Detalle de escalas para vuelo de vuelta -->
        <ng-container *ngIf="formattedFlights.inbound.hasStops">
          <div class="flight-details">
            <div
              class="flight-segment"
              *ngFor="let segment of formattedFlights.inbound.segments"
            >
              {{ segment.airline.name }} ({{ segment.flightNumber }})
              {{ segment.departureTime }} {{ segment.departureCity }} ({{
                segment.departureIata
              }}) - {{ segment.arrivalTime }} {{ segment.arrivalCity }} ({{
                segment.arrivalIata
              }})
            </div>
          </div>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>

  <!-- Mensaje si no hay vuelos disponibles -->
  <ng-template #noFlights>
    <div class="no-flights">
      <p>La información de vuelos estará disponible próximamente.</p>
    </div>
  </ng-template>
</div>
