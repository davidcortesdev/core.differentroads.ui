<p-panel styleClass="flight-pan" *ngIf="formattedFlights">
  <ng-template pTemplate="header">
    <div class="pan-hdr">Información de vuelos</div>
  </ng-template>
  <div class="flight-det">
    <!-- Vuelos (ida y vuelta) -->
    <ng-container *ngFor="let flight of [formattedFlights.outbound, formattedFlights.inbound]; let i = index">
      <div class="flight-info" *ngIf="flight">
        <div class="flight-header">
          <span class="flight-type">{{ i === 0 ? 'Ida' : 'Vuelta' }}</span>
          <span class="flight-date">{{ flight.date | date: 'dd/MM/yyyy' }}</span>
        </div>
        
        <div class="flight-route">
          <div class="departure">
            <div class="time">{{ flight.departureTime }}</div>
            <div class="airport">{{ flight.departureAirport }}</div>
          </div>
          
          <div class="flight-details">
            <div class="duration">{{ flight.duration }}</div>
            <div class="line"></div>
            <div class="flight-info-compact">
              <span *ngIf="!flight.hasStops">Directo</span>
              <span *ngIf="flight.hasStops">{{ flight.stops }} escala{{ flight.stops > 1 ? 's' : '' }}</span>
            </div>
          </div>
          
          <div class="arrival">
            <div class="time">
              {{ flight.arrivalTime }}
              <span class="next-day" *ngIf="flight.isNextDay">+1</span>
            </div>
            <div class="airport">{{ flight.arrivalAirport }}</div>
          </div>
        </div>
        
        <!-- Detalles de segmentos (compactados) -->
        <div class="segments" *ngIf="flight.segments.length > 1">
          <div class="segment-list">
            <div class="segment" *ngFor="let segment of flight.segments; let last = last; let first = first">
              <div class="segment-info">
                <div class="segment-airline">{{ segment.airline.name }} {{ segment.flightNumber }}</div>
                <div class="segment-times">
                  {{ segment.departureTime }} {{ segment.departureIata }} → 
                  {{ segment.arrivalTime }}
                  <span class="next-day" *ngIf="segment.isNextDay">+1</span>
                  {{ segment.arrivalIata }}
                </div>
              </div>
              <!-- Se ha eliminado el conector de segmentos -->
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    
    <!-- Mensaje si no hay vuelos -->
    <div class="no-flights" *ngIf="!formattedFlights.outbound && !formattedFlights.inbound">
      No hay información de vuelos disponible para esta reserva.
    </div>
  </div>
</p-panel>