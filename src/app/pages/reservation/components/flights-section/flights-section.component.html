<div
  class="flights-container"
  *ngIf="formattedFlights && (formattedFlights.outbound || formattedFlights.inbound)"
>
  <!-- Encabezado con icono de avión -->
  <div class="flight-header">
    <span class="plane-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
        fill="#f05a4c"
      >
        <path
          d="m397-115-99-184-184-99 71-70 145 25 102-102-317-135 84-86 385 68 124-124q23-23 57-23t57 23q23 23 23 56.5T822-709L697-584l68 384-85 85-136-317-102 102 26 144-71 71Z"
        />
      </svg>
    </span>
    <span class="header-text">Información sobre los vuelos</span>
  </div>

  <ng-container *ngIf="formattedFlights">
    <!-- Ida -->
    <ng-template [ngIf]="formattedFlights.outbound">
      <div class="flight-section">
        <!-- Título Ida como subtítulo -->
        <div class="section-title">
          <span>Ida</span>
        </div>

        <!-- Contenido del vuelo -->
        <ng-container *ngTemplateOutlet="flightRouteTemplate; context: {$implicit: formattedFlights.outbound, type: 'outbound'}"></ng-container>
      </div>
    </ng-template>

    <!-- Vuelta -->
    <ng-template [ngIf]="formattedFlights.inbound">
      <div class="flight-section">
        <!-- Título Vuelta como subtítulo -->
        <div class="section-title">
          <span>Vuelta</span>
        </div>

        <!-- Contenido del vuelo -->
        <ng-container *ngTemplateOutlet="flightRouteTemplate; context: {$implicit: formattedFlights.inbound, type: 'inbound'}"></ng-container>
      </div>
    </ng-template>
  </ng-container>
</div>

<!-- Template reutilizable para la ruta de vuelo -->
<ng-template #flightRouteTemplate let-flight let-type="type">
  <div class="flight-route">
    <!-- Columna izquierda (Origen) -->
    <div class="flight-column origin">
      <div class="time-date">
        {{ flight.departureTime }}
        <span>{{ flight.date }}</span>
      </div>
      <div class="airport">
        {{ flight.departureAirport }}
      </div>
    </div>

    <!-- Línea central con duración -->
    <div class="flight-duration-container">
      <div class="duration">
        {{ flight.duration }}
      </div>
      <div class="flight-line">
        <div class="dot left"></div>
        <div class="line"></div>
        <div class="dot right"></div>
      </div>
      <div class="flight-type">
        <ng-container *ngIf="flight.hasStops">
          {{ flight.stops }}
          <ng-container *ngIf="flight.stops === 1">ESCALA</ng-container>
          <ng-container *ngIf="flight.stops > 1">ESCALAS</ng-container>
          {{ flight.stopCity }}
        </ng-container>
        <ng-container *ngIf="!flight.hasStops">
          DIRECTO
        </ng-container>
      </div>
    </div>

    <!-- Columna derecha (Destino) -->
    <div class="flight-column destination">
      <div class="time-date">
        {{ flight.arrivalTime }}
        <span>{{ flight.date }}</span>
      </div>
      <div class="airport">
        {{ flight.arrivalAirport }}
      </div>
    </div>
  </div>

  <!-- Detalle de escalas -->
  <ng-container *ngIf="flight.hasStops">
    <div class="flight-details">
      <div
        class="flight-segment"
        *ngFor="let segment of flight.segments"
      >
        {{ segment.airline.name }} ({{ segment.flightNumber }})
        {{ segment.departureTime }} {{ segment.departureCity }} ({{ segment.departureIata }}) - 
        {{ segment.arrivalTime }} {{ segment.arrivalCity }} ({{ segment.arrivalIata }})
      </div>
    </div>
  </ng-container>
</ng-template>
