// Variables globales
$azul: var(--background-azul);
$coral: #ea685c;
$border: #f59188;
$text-secondary: #6c757d;

// Variables para tamaños y espaciados
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 0.75rem;
$spacing-lg: 1rem;
$spacing-xl: 0.5rem;
$border-radius: 11.434px;

// Mixins para reutilizar estilos
@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

@mixin card-style {
  border-radius: $border-radius;
  overflow: hidden;
  border: 2px solid $border;
}

:host {
  display: block;
  margin-bottom: $spacing-xl;

  ::ng-deep {
    // Estilos de panel
    .p-panel,
    .flight-pan {
      @include card-style;
      margin-bottom: $spacing-xl;
    }

    .p-panel-header,
    .p-panel-content {
      color: $azul;
      background: white;
      border: 0;
      padding: $spacing-lg;
    }

    .pan-hdr {
      font-weight: 600;
      font-size: 1.1rem;
    }

    // Estilos de vuelo
    .flight-info {
      margin-bottom: $spacing-xl;
      padding-bottom: $spacing-xl;
      border-bottom: 1px solid #e9ecef;
      
      &:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }
    }
    
    // Cabecera de vuelo
    .flight-header {
      @include flex-between;
      margin-bottom: $spacing-lg;
      
      .flight-type {
        font-weight: 600;
        color: $azul;
      }
      
      .flight-date {
        color: $text-secondary;
      }
    }
    
    // Ruta de vuelo
    .flight-route {
      @include flex-between;
      margin-bottom: $spacing-md;
      text-align: center;
      
      .departure, .arrival {
        flex: 1;
        display: flex;
        flex-direction: column;
        
        .flight-first-line {
          margin-bottom: $spacing-xs;
          
          .time {
            font-size: 1.2rem;
            font-weight: 600;
            color: $azul;
          }
        }
        
        .flight-second-line {
          .airport {
            color: $text-secondary;
            font-size: 0.85rem;
          }
        }
      }
      
      .arrival {
        text-align: right;
        
        .flight-first-line, .flight-second-line {
          align-items: flex-end;
        }
      }
      
      .flight-details {
        flex: 2;
        text-align: center;
        position: relative;
        padding: 0 $spacing-lg;
        
        .duration {
          font-weight: 500;
          color: $azul;
          margin-bottom: $spacing-sm;
        }
        
        .line {
          height: 2px;
          background-color: $border;
          position: relative;
          margin: $spacing-sm 0;
          
          &:before, &:after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: $coral;
            top: -3px;
          }
          
          &:before {
            left: 0;
          }
          
          &:after {
            right: 0;
          }
        }
      }
    }
    
    // Información compacta
    .flight-info-compact {
      font-size: 0.85rem;
      color: $text-secondary;
      margin-top: $spacing-sm;
    }
    
    // Segmentos de vuelo
    .segments {
      background-color: rgba($coral, 0.05);
      border-radius: 4px;
      padding: $spacing-md;
      margin-top: $spacing-md;
      max-width: 90%;
      margin-left: auto;
      margin-right: auto;
      
      .segment-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.8rem;
        
        th {
          text-align: left;
          padding: $spacing-xs $spacing-sm;
          color: $text-secondary;
          font-weight: 500;
          border-bottom: 1px solid rgba($coral, 0.2);
        }
        
        td {
          padding: $spacing-xs $spacing-sm;
          vertical-align: middle;
          border-bottom: 1px solid rgba($coral, 0.1);
          
          &:last-child {
            text-align: right;
          }
        }
        
        tr:last-child td {
          border-bottom: none;
        }
        
        tr:hover {
          background-color: rgba($coral, 0.03);
        }
      }
    }
    
    // Aerolínea del segmento
    .segment-airline {
      font-weight: 500;
      color: $azul;
      display: flex;
      align-items: center;
      gap: $spacing-xs;
    }
    
    // Horarios del segmento
    .segment-times {
      color: $text-secondary;
    }
    
    // Logo de aerolínea
    .airline-logo {
      width: 16px;
      height: 16px;
      vertical-align: middle;
      display: inline-block;
      will-change: transform;
      object-fit: contain;
    }
    
    // Indicador de día siguiente
    .next-day {
      display: inline-block;
      color: $coral;
      font-size: 0.7em;
      font-weight: bold;
      vertical-align: super;
      margin-left: 2px;
    }
    
    // Mensaje de no hay vuelos
    .no-flights {
      text-align: center;
      padding: $spacing-xl;
      color: $text-secondary;
      font-style: italic;
      font-size: 0.9rem;
    }
  }
}

// Media queries optimizados
@media (max-width: 1024px) {
  :host ::ng-deep .flight-pan .flight-route {
    gap: 1.5rem;
  }
}

@media (max-width: 768px) {
  :host ::ng-deep .flight-pan {
    font-size: 12px;
    
    .flight-route-integrated {
      flex-direction: column;
      
      .flight-type-container {
        margin-bottom: $spacing-sm;
        text-align: center;
        width: 100%;
      }
    }
    
    .flight-route {
      flex-direction: column;
      gap: $spacing-sm;
      margin-bottom: $spacing-lg;
      
      .departure, .arrival {
        padding: $spacing-xs 0;
        text-align: center;
        
        .flight-first-line .time {
          font-size: 1.3rem;
        }
        
        .flight-second-line .airport {
          margin-bottom: $spacing-xs;
        }
      }
      
      .arrival {
        text-align: center;
        
        .flight-first-line, .flight-second-line {
          align-items: center;
        }
      }
    }
    
    .segments {
      max-width: 95%;
      padding: $spacing-xs;
      
      .segment-table {
        font-size: 0.75rem;
        
        th, td {
          padding: $spacing-xs;
        }
      }
    }
  }
}

@media (max-width: 480px) {
  :host ::ng-deep .flight-pan {
    .segments {
      padding: $spacing-sm;
      max-width: 100%;
      
      .segment-table {
        font-size: 0.7rem;
        
        th {
          font-size: 0.65rem;
        }
        
        .segment-times {
          font-size: 0.65rem;
        }
      }
    }
  }
}