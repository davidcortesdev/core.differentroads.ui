// Variables globales
$azul: var(--background-azul);
$coral: #ea685c;
$border: #f59188;
$text-secondary: #6c757d;

// Variables para tamaños y espaciados
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 0.75rem;
$spacing-lg: 1rem;
$spacing-xl: 1.5rem;
$border-radius: 11.434px;

// Mixins para reutilizar estilos
@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

@mixin card-style {
  border-radius: $border-radius;
  overflow: hidden;
  border: 2px solid $border;
}

:host {
  display: block;
  margin-bottom: $spacing-xl;

  ::ng-deep {
    // Estilos de panel
    .p-panel,
    .flight-pan {
      @include card-style;
      margin-bottom: $spacing-xl;
    }

    .p-panel-header,
    .p-panel-content {
      color: $azul;
      background: white;
      border: 0;
      padding: $spacing-lg;
    }

    .pan-hdr {
      font-weight: 600;
      font-size: 1.1rem;
    }

    // Estilos de vuelo
    .flight-info {
      margin-bottom: $spacing-xl;
      padding-bottom: $spacing-xl;
      border-bottom: 1px solid #e9ecef;
      
      &:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }
    }
    
    // Cabecera de vuelo
    .flight-header {
      @include flex-between;
      margin-bottom: $spacing-lg;
      
      .flight-type {
        font-weight: 600;
        color: $azul;
      }
      
      .flight-date {
        color: $text-secondary;
      }
    }
    
    // Ruta de vuelo
    .flight-route {
      @include flex-between;
      margin-bottom: $spacing-md;
      text-align: center;
      
      .departure, .arrival {
        flex: 1;
        
        .time {
          font-size: 1.2rem;
          font-weight: 600;
          color: $azul;
        }
        
        .airport {
          color: $text-secondary;
          font-size: 0.85rem;
          margin-bottom: $spacing-xs;
        }
      }
      
      .arrival {
        text-align: right;
      }
      
      .flight-details {
        flex: 2;
        text-align: center;
        position: relative;
        padding: 0 $spacing-lg;
        
        .duration {
          font-weight: 500;
          color: $azul;
          margin-bottom: $spacing-sm;
        }
        
        .line {
          height: 2px;
          background-color: $border;
          position: relative;
          margin: $spacing-sm 0;
          
          &:before, &:after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: $coral;
            top: -3px;
          }
          
          &:before {
            left: 0;
          }
          
          &:after {
            right: 0;
          }
        }
      }
    }
    
    // Información compacta
    .flight-info-compact {
      font-size: 0.85rem;
      color: $text-secondary;
      margin-top: $spacing-sm;
    }
    
    // Segmentos de vuelo
    .segments {
      background-color: rgba($coral, 0.05);
      border-radius: 4px;
      padding: $spacing-md;
      margin-top: $spacing-md;
      
      .segment-list {
        display: flex;
        flex-direction: column;
        gap: $spacing-sm;
      }
    }
    
    // Segmento individual
    .segment {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      margin-bottom: $spacing-sm;
      
      &:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }
      
      &.ng-star-inserted {
        margin: 0;
      }
    }
    
    // Información del segmento
    .segment-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: $spacing-xs;
      background-color: rgba($coral, 0.03);
      border-radius: 4px;
      width: 100%;
      font-size: 0.85rem;
    }
    
    // Aerolínea del segmento
    .segment-airline {
      font-weight: 500;
      color: $azul;
    }
    
    // Horarios del segmento
    .segment-times {
      font-size: 0.9rem;
      color: $text-secondary;
    }
    
    // Logo de aerolínea
    .airline-logo {
      width: 16px;
      height: 16px;
      margin-right: 5px;
      vertical-align: middle;
      display: inline-block;
      will-change: transform;
      object-fit: contain;
    }
    
    // Indicador de día siguiente
    .next-day {
      display: inline-block;
      color: $coral;
      font-size: 0.7em;
      font-weight: bold;
      vertical-align: super;
      margin-left: 2px;
    }
    
    // Mensaje de no hay vuelos
    .no-flights {
      text-align: center;
      padding: $spacing-xl;
      color: $text-secondary;
      font-style: italic;
      font-size: 0.9rem;
    }
  }
}

// Media queries optimizados
@media (max-width: 1024px) {
  :host ::ng-deep .flight-pan .flight-route {
    gap: 1.5rem;
  }
}

@media (max-width: 768px) {
  :host ::ng-deep .flight-pan {
    font-size: 12px;
    
    .flight-route {
      flex-direction: column;
      gap: $spacing-sm;
      margin-bottom: $spacing-lg;
      
      .departure, .arrival {
        padding: $spacing-xs 0;
        text-align: center;
        
        .time {
          font-size: 1.3rem;
        }
        
        .airport {
          margin-bottom: $spacing-xs;
        }
      }
      
      .arrival {
        text-align: center;
      }
    }
  }
}

@media (max-width: 480px) {
  :host ::ng-deep .flight-pan .segments {
    padding: $spacing-sm;
    font-size: 0.85rem;
    line-height: 1.2;
  }
}