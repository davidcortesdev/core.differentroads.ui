<div class="background-banner">
  <img src="assets/images/BannerPrueba.png" alt="Banner de viajes" class="banner-image">
  <div class="banner-overlay"></div>
</div>

<div class="reviews-container">
  <h2>¿Como ha ido tu viaje? Déjanos tu opinión</h2>

  <div class="trip-header">
    <div class="trip-title"><i class="pi pi-send"></i> {{ tripInfo.title }}</div>
    <div class="trip-date">Fecha de inicio: {{ formattedDate }}</div>
  </div>
  
  <div class="secondary-text">
    <label>
      <p class="secondary-text">Esperamos que el viaje que acabas de disfrutar haya sido una experiencia maravillosa. 
        En Different Roads trabajamos con el objetivo de que disfrutes de nuestros viajes tanto 
        como nos gustaria disfrutarlos a nosortos mismos. Nos encataría conocer tu opinión para seguir mejorando. 
        Por ello, te agradeceríamos que completaras estas preguntas. ¡Gracias por tu tiempo y confianza!</p>
    </label>
  </div>

  <!-- Etiqueta <form> eliminada, se mantiene el div contenedor -->
  <div>
    <div class="p-fluid p-grid p-formgrid p-mb-4">
      <div class="p-field p-col-12 p-mb-3">
        <!-- Nombre y apellidos -->
        <label for="nombre" class="input-label">
          <i class="pi pi-send input-icon"></i> Nombre y apellidos<span>*</span>
        </label>

        <!-- Se mantiene #nombreInput, sin [(ngModel)] ni name -->
        <input id="nombre" type="text" class="input-text" autocomplete="off" #nombreInput />
      </div>

      <div class="p-field p-col-12">
        <!-- Email -->
        <label for="email" class="input-label">
          <i class="pi pi-envelope input-icon"></i> E-mail<span>*</span>
        </label>

        <!-- Se mantiene #emailInput, sin [(ngModel)] ni name -->
        <input id="email" type="email" class="input-text" autocomplete="off" #emailInput />
      </div>
    </div>

  <div class="stars-container">
    <div class="stars-row">
      <div class="star-item">
        <p class="review-label"><i class="pi pi-map p-mr-1"></i> Tour<span>*</span></p>
        <div class="stars">
          <span class="star-wrapper" (click)="setRating('tour', 1)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('tour', 1)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('tour', 1)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('tour', 2)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('tour', 2)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('tour', 2)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('tour', 3)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('tour', 3)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('tour', 3)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('tour', 4)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('tour', 4)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('tour', 4)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('tour', 5)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('tour', 5)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('tour', 5)" aria-hidden="true"></i>
          </span>
        </div>
      </div>

      <div class="star-item">
        <p class="review-label"><i class="pi pi-map-marker p-mr-1"></i> Destinos<span>*</span></p>
        <div class="stars">
          <span class="star-wrapper" (click)="setRating('destinos', 1)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('destinos', 1)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('destinos', 1)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('destinos', 2)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('destinos', 2)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('destinos', 2)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('destinos', 3)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('destinos', 3)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('destinos', 3)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('destinos', 4)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('destinos', 4)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('destinos', 4)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('destinos', 5)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('destinos', 5)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('destinos', 5)" aria-hidden="true"></i>
          </span>
        </div>
      </div>

      <div class="star-item">
        <p class="review-label"><i class="pi pi-euro p-mr-1"></i> Calidad-precio<span>*</span></p>
        <div class="stars">
          <span class="star-wrapper" (click)="setRating('calidadPrecio', 1)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('calidadPrecio', 1)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('calidadPrecio', 1)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('calidadPrecio', 2)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('calidadPrecio', 2)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('calidadPrecio', 2)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('calidadPrecio', 3)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('calidadPrecio', 3)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('calidadPrecio', 3)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('calidadPrecio', 4)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('calidadPrecio', 4)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('calidadPrecio', 4)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('calidadPrecio', 5)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('calidadPrecio', 5)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('calidadPrecio', 5)" aria-hidden="true"></i>
          </span>
        </div>
      </div>
    </div>

    <!-- Segunda fila de estrellas -->
    <div class="stars-row">
      <div class="star-item">
        <p class="review-label"><i class="pi pi-flag p-mr-1"></i> Actividades<span>*</span></p>
        <div class="stars">
          <span class="star-wrapper" (click)="setRating('actividades', 1)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('actividades', 1)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('actividades', 1)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('actividades', 2)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('actividades', 2)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('actividades', 2)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('actividades', 3)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('actividades', 3)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('actividades', 3)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('actividades', 4)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('actividades', 4)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('actividades', 4)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('actividades', 5)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('actividades', 5)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('actividades', 5)" aria-hidden="true"></i>
          </span>
        </div>
      </div>

      <div class="star-item">
        <p class="review-label"><i class="pi pi-user p-mr-1"></i> Guía<span>*</span></p>
        <div class="stars">
          <span class="star-wrapper" (click)="setRating('guias', 1)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('guias', 1)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('guias', 1)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('guias', 2)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('guias', 2)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('guias', 2)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('guias', 3)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('guias', 3)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('guias', 3)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('guias', 4)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('guias', 4)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('guias', 4)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('guias', 5)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('guias', 5)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('guias', 5)" aria-hidden="true"></i>
          </span>
        </div>
      </div>

      <div class="star-item">
        <p class="review-label"><i class="pi pi-home p-mr-1"></i> Alojamientos<span>*</span></p>
        <div class="stars">
          <span class="star-wrapper" (click)="setRating('alojamientos', 1)">
            <i class="pi pi-star"
              [class.active]="isHalfStar('alojamientos', 1)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('alojamientos', 1)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('alojamientos', 2)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('alojamientos', 2)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('alojamientos', 2)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('alojamientos', 3)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('alojamientos', 3)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('alojamientos', 3)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('alojamientos', 4)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('alojamientos', 4)" aria-hidden="true"></i>
            <i class="pi pi-star" 
              [class.active]="isFullStar('alojamientos', 4)" aria-hidden="true"></i>
          </span>
          <span class="star-wrapper" (click)="setRating('alojamientos', 5)">
            <i class="pi pi-star" 
              [class.active]="isHalfStar('alojamientos', 5)" aria-hidden="true"></i>
            <i class="pi pi-star"
              [class.active]="isFullStar('alojamientos', 5)" aria-hidden="true"></i>
          </span>
        </div>
      </div>
    </div>
  </div>



  <div class="textarea-container">
    <!-- Corregido label for="comentario" -->
    <label for="comentario" class="input-label">
      <i class="pi pi-inbox input-icon"></i> Cuéntanos más sobre tu viaje<span>*</span>
    </label>
    <!-- Se mantiene #comentarioInput -->
    <textarea id="comentario" #comentarioInput></textarea>
  </div>

  <div class="review-text">
    <label for="nombre" class="input-label">
      <i class="pi pi-camera input-icon"></i> ¿Quieres compartir tu viaje con nosotros?
    </label>
    <div class="upload-button-container">
      <button class="upload-button">
        Cargar fotos <i class="pi pi-upload"></i>
      </button>
    </div>
  </div>

  <div class="submit-review-container">
    <!-- El botón ya llama a handleManualSubmit() en el evento (click) -->
    <button type="button" class="submit-review" (click)="submitReview()">Enviar opinión</button>
  </div>
  </div> <!-- Cierre del div contenedor principal de los campos -->
</div>