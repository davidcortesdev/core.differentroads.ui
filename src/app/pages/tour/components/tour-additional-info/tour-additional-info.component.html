<div class="tour-additional-info-container">
  <!-- Card para "Guarda tu presupuesto" con tooltip mejorado -->
  <p-card
    styleClass="action-card"
    (click)="handleSaveTrip()"
    [pTooltip]="
      !isAuthenticated
        ? 'Para guardar tu presupuesto debes iniciar sesión o registrarte en la plataforma'
        : 'Guarda este presupuesto en tu perfil para consultarlo más tarde'
    "
    tooltipPosition="top"
  >
    <div class="card-content">
      <span class="bg-pink-100">
        <i class="pi pi-bookmark" aria-hidden="true"></i>
      </span>
      <span class="card-text">Guarda tu presupuesto</span>
    </div>
  </p-card>

  <!-- Card para "Descarga tu presupuesto" con tooltip -->
  <p-card
     styleClass="action-card claseBord"
     (click)="handleDownloadTrip()"
    pTooltip="Envia un email con un PDF con toda la información de este presupuesto"
    tooltipPosition="top"
  >
    <div class="card-content">
      <span class="bg-pink-100">
        <i class="pi pi-download" aria-hidden="true"></i>
      </span>
      <span class="card-text">Descarga tu presupuesto</span>
    </div>
  </p-card>

  <!-- Card para "Comparte tu presupuesto con alguien" con tooltip (ahora abre el mismo modal) -->
  <p-card
     styleClass="action-card"
     (click)="handleInviteFriend()"
    pTooltip="Comparte este presupuesto con amigos o familiares"
    tooltipPosition="top"
  >
    <div class="card-content">
      <span class="bg-pink-100">
        <i class="pi pi-user-plus" aria-hidden="true"></i>
      </span>
      <span class="card-text">Comparte tu presupuesto con alguien</span>
    </div>
  </p-card>
</div>
asd
<!-- Resto del componente sin cambios -->
<app-tour-info-accordion
  *ngIf="hasInfoCards"
  [infoCards]="infoCards"
></app-tour-info-accordion>

<p-toast position="top-right"></p-toast>

<app-login-modal
  [visible]="loginDialogVisible"
  [modalType]="'budget'"
  (close)="closeLoginModal()"
  (login)="navigateToLogin()"
  (register)="navigateToRegister()"
>
</app-login-modal>

<!-- Dialog mejorado para resolver problemas de cierre -->
<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [breakpoints]="dialogBreakpoints"
  [style]="dialogStyle"
  [draggable]="false"
  [resizable]="false"
  styleClass="budget-modal"
  [closeOnEscape]="true"
  [dismissableMask]="true"
  (onHide)="handleCloseModal()"
>
  <app-budget-dialog
    class="budget-dialog"
    [visible]="visible"
    [handleCloseModal]="handleCloseModal.bind(this)"
    [shouldClearFields]="shouldClearFields"
    [existingOrderId]="isUpdateMode && existingOrder && existingOrder._id ? existingOrder._id : null"    [tourName]="isUpdateMode ? tourName : (tour?.name || '')"
    [periodName]="isUpdateMode ? periodName : ''"
    [periodDates]="isUpdateMode ? periodDates : ''"
    [departureCity]="isUpdateMode ? (selectedFlight?.name || 'Sin vuelos') : ''"
    [tripType]="'Circuito'"
    [travelersCount]="isUpdateMode ? {
      adults: travelersSelected?.adults || 0,
      children: travelersSelected?.childs || 0,
      babies: travelersSelected?.babies || 0
    } : null"
    [periodId]="isUpdateMode ? periodID : ''"
    (close)="handleCloseModal()"
  ></app-budget-dialog>
</p-dialog>