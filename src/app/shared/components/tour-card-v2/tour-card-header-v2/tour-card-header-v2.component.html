<div class="img" (click)="handleTourClick()">
  <img [src]="tourData.imageUrl" [alt]="tourData.title" loading="lazy" data-cookieconsent="ignore" />
  <div class="overlay">
    <ng-container *ngIf="averageRating !== undefined; else loadingRating">
      <span class="rating p-button-primary">{{ averageRating }} ★</span>
    </ng-container>
    <ng-template #loadingRating>
      <span *ngIf="isLoadingRating" class="rating p-button-primary loading">...</span>
    </ng-template>
    
    <span *ngIf="tourData.isByDr" class="tag expandable-tag by-dr-tag">
      <span class="short-text">
        <img
          alt="Different Roads logo"
          src="assets/images/icon-different.svg"
          loading="lazy"
        />
        By DR
      </span>
      <span class="expanded-content">
        <img
          alt="Different Roads logo"
          src="assets/images/icon-different.svg"
          loading="lazy"
        />
        Viaje creado por el equipo de Different Roads
      </span>
    </span>
    
    <div class="tags-container">
      <!-- Tag principal -->
      <span class="tag" *ngIf="tourData.tag">{{ tourData.tag }}</span>
      
      <!-- ✅ NUEVO: Botones de TripTypes -->
      <span 
  *ngFor="let tripType of tourData.tripTypes" 
  class="tag expandable-tag trip-type-tag"
  [style.background]="tripType.color">
  <span class="short-text">
    <span class="abbreviation-text">{{ tripType.abbreviation }}</span>
  </span>
  <span class="expanded-content">
    <span class="full-text">{{ tripType.name }}</span>
  </span>
</span>
    </div>
    
    <div class="title-overlay">
      <!-- ✅ LÍNEA SUPERIOR: Días de itinerario -->
      <div *ngIf="tourData.itineraryDaysText" class="itinerary-days-text">
        {{ tourData.itineraryDaysText }}
      </div>
      <!-- ✅ LÍNEA INFERIOR: Título principal -->
      <h3>{{ tourData.title }}</h3>
    </div>
  </div>
</div>